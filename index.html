<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>XML Veri Gösterimi</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    #data { margin-top: 20px; padding: 10px; border: 1px solid #ddd; display: inline-block; }
  </style>
</head>
<body>
  <h1>XML Verisi</h1>
  <div id="data">Veri yükleniyor...</div>

  <script>
    const XML_URL = "https://www.w3schools.com/xml/note.xml";
    const PROXY = "https://api.allorigins.win/raw?url="; // CORS geçidi

    async function getXML() {
      try {
        // cache'i kırmak için zaman damgası ekliyoruz
        const url = PROXY + encodeURIComponent(XML_URL) + "&t=" + Date.now();
        const response = await fetch(url, { cache: "no-store" });
        const text = await response.text();

        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(text, "application/xml");

        const to = xmlDoc.getElementsByTagName("to")[0]?.textContent ?? "(yok)";
        const body = xmlDoc.getElementsByTagName("body")[0]?.textContent ?? "(yok)";

        document.getElementById("data").innerHTML = `
          <b>Alıcı:</b> ${to}<br>
          <b>Mesaj:</b> ${body}
        `;
      } catch (err) {
        document.getElementById("data").innerText = "XML okunamadı: " + err;
        console.error(err);
      }
    }

    getXML();
    setInterval(getXML, 5000);
  </script>
</body>
</html>
